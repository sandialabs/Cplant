  <!-- manual page source format generated by PolyglotMan v3.0.9, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>bebopd(8L) manual page</TITLE>
</HEAD>
<BODY bgcolor=white>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">Name</A></H2>
    <BR>
 <P>
  <B>bebopd</B> -- Cplant node allocation daemon 
<H2><A NAME="sect1" HREF="#toc1">Synopsis</A></H2>
    <BR>
 <P>
  <B>bebopd</B> [<B>-D</B>]  [<B>-S</B> [1|0]]  [<B>-L</B> [1|0]]  [<B>-daemon</B>]  [<B>-alternative</B>]  [<B>-r <I>optional-file-name</I></B>]
 [<B>-help</B>]  [<B>-PBSsupport</B>]  [<B>-PBSupdate</B>]  [<B>-PBSlist <I>node,list</I></B>] 
<H2><A NAME="sect2" HREF="#toc2">Description</A></H2>
   
<BR>
 <P>
  The <B>bebopd</B> daemon runs in the service partition.  It is the point in
the Cplant where knowledge of compute node status resides. It has the following
interfaces:   <P>

<DL>

<DT><I>PCTs</I> </DT>
<DD>     <BR>
 The <B>bebopd</B> receives messages from the compute node PCTs when they start
and end, and when an application terminates.  If the  <B>bebopd</B> is restarted,
it contacts the PCTs to identify itself to them.  The <B>bebopd</B> sends status
queries as needed to the PCTs and maintains the responses.  </DD>

<DT><I>yod</I> </DT>
<DD>     <BR>
 The <B>bebopd</B> accepts yod requests on behalf of  users wishing to run a parallel
application.  The <B>bebopd</B> attempts to allocate to the job  the requested
nodes, and assigns a numeric job ID to the application.  </DD>

<DT><I>pingd</I> </DT>
<DD>     <BR>
 It also accepts pingd requests for updates from the compute partition,
and returns pingd a list of compute node status information.  It accepts
requests from pingd to send a SIGTERM or a SIGKILL to an application, kill
PCTs, or to note that a PCT it thought was out there is gone.  The bebopd
may also receive requests from pingd to turn on or off PBSsupport or PBSupdate,
or to change the number of nodes reserved for interactive (i.e. non-PBS) use.
<P>
 </DD>

<DT><I>PBS server</I> </DT>
<DD>    When the bebopd is run in PBSupdate mode, it updates the
PBS server whenever the number of live compute nodes changes.  That is,
it uses the PBS qmgr client to keep the resources_available.size and resources_max.size
attributes of the PBS server accurate. </DD>
</DL>
<P>
  The <B>bebopd</B> as designed today exists
as a single process on one node of the service partition.  The plan is to
run <B>bebopd</B> as a distributed service across the service partition, both
in the interest of fault tolerance and to improve response time to yod
and pingd users. 
<H2><A NAME="sect3" HREF="#toc3">Options</A></H2>
    <BR>
 <P>
  <P>
<P>
 
<DL>

<DT><I>-alternative</I> </DT>
<DD>    Every portals process has a portal ID.  It is this ID
that the portals module uses when dispatching received messages to processes.
For testing purposes we may want to run another bebopd on the same node.
 This argument causes the <B>bebopd</B> to request an unused portal ID from the
portals module.  The bebopd will display it's alternative portal ID on  startup.
<P>
 </DD>

<DT><I>-D</I> </DT>
<DD>    This option causes the <B>bebopd</B> to output information about what it
is doing.  Repeating the <I>-D</I> option on the command line increases the amount
of information. <P>
 </DD>

<DT><I>-S [0|1]        </I> </DT>
<DD>    The <B>bebopd</B> outputs warnings and errors,
and, if the <I>-D</I> option is used, status information. The <I>0</I> switch turns off
all output from the <B>bebopd</B> to stderr. The <I>1</I> switch turns it on.  By default,
the <B>bebopd</B> <I>does not</I> write to stderr.  <BR>
 </DD>

<DT><I>-L [0|1]        </I> </DT>
<DD>    The <B>bebopd</B> outputs warnings and errors, and, if the
<I>-D</I> option is used, status information. The <I>0</I> switch turns off all output
from the <B>bebopd</B> to the log file. The <I>1</I> switch turns it on.  By default, the
<B>bebopd</B> <I>does</I> write to log file. <P>
 <P>
 </DD>

<DT><I>-r <I>optional-file-name</I></I> </DT>
<DD>    This option specifies
that the <B>bebopd</B> is being restarted. The <B>bebopd</B> always saves a file (CRsaved_pct_list
in the same directory as the bebopd registry file) containing a list of
active PCTs when it exits.  When <B>bebopd</B> restarts, it reads in this file
and contacts the PCTs for their status.  If an <I>optional-file-name</I> is given,
the bebopd will look there for the PCT list instead of in the CRsaved_pct_list
file. <P>
 </DD>

<DT><I>-help</I> </DT>
<DD>    This option displays the list of bebopd options. <P>
 </DD>

<DT><I>-daemon</I>
</DT>
<DD>    This option runs the bebopd in the background.  The default is to run
the bebopd as a foreground process. <P>
 </DD>

<DT><I>-PBSsupport</I> </DT>
<DD></DD>

<DT><I>-PBSupdate</I> </DT>
<DD>    PBS (Portal
Batch System) on Cplant requires support from the bebopd. The bebopd is
running in PBSsupport mode if it is keeping track of the number of live
compute nodes in the machine and policing PBS users to ensure they use
no more nodes than they were allocated.  The bebopd is running in PBSupdate
mode if in addition it sends updates to the PBS server whenever the number
of live compute nodes changes.  These two arguments can be used to turn
on PBSsupport or to turn on PBSupdate. Since PBSupdate implies PBSsupport,
turning on PBSupdate automatically turns on PBSsupport. <P>
 </DD>

<DT><I>-PBSlist <I>node,list</I></I>
</DT>
<DD>    The bebopd can reserve <I>numNodes</I> nodes for interactive use.  PBS will
not be able to schedule these nodes for batch jobs.  Specify the list of
interactive nodes here (ie- 23,45..78,99). </DD>
</DL>
<P>
 
<H2><A NAME="sect4" HREF="#toc4">Errors</A></H2>
    <BR>
 <P>
  Errors and warnings are logged to /var/log/cplant on the node hosting
the bebopd. 
<H2><A NAME="sect5" HREF="#toc5">Signals</A></H2>
    <BR>
 <P>
  On receiving a SIGUSR1 or SIGUSR2, the bebopd will write to the log
file it's identifying information and what routine it is in. On receiving
a SIGHUP, the bebopd will close and reopen it's log file, list identifying
information to the log file, and re-read the site file. 
<H2><A NAME="sect6" HREF="#toc6">Files</A></H2>
    <BR>
 <P>
  <P>

<DL>

<DT><I>/etc/local/saved_pct_list</I> </DT>
<DD>    This file lists all PCTs that were active
when the last <B>bebopd</B> terminated.   </DD>

<DT><I>/etc/local/site</I> </DT>
<DD>    This file defines
site specific information that may be required by the <B>bebopd</B>. </DD>

<DT><I>/var/log/cplant</I>
</DT>
<DD>    This is the log file where Cplant daemons and utilities log status.
</DD>
</DL>
<P>
  
<H2><A NAME="sect7" HREF="#toc7">See Also</A></H2>
    <BR>
 <P>
  <B>pingd</B> <B>yod</B> <B>pct</B> <B>site</B> 
<H2><A NAME="sect8" HREF="#toc8">Bugs</A></H2>
    <BR>
 <P>
  Let us know if you locate any (cplant-help@cs.sandia.gov). <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Description</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Options</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Errors</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Signals</A></LI>
<LI><A NAME="toc6" HREF="#sect6">Files</A></LI>
<LI><A NAME="toc7" HREF="#sect7">See Also</A></LI>
<LI><A NAME="toc8" HREF="#sect8">Bugs</A></LI>
</UL>
</BODY></HTML>
