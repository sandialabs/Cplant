  <!-- manual page source format generated by PolyglotMan v3.0.9, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>CPLANTJOBSIZE(3) manual page</TITLE>
</HEAD>
<BODY bgcolor=white>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">Name</A></H2>
    <BR>
 <P>
  CplantJobSize, CplantJobNidMap,  CplantJobPidMap, CplantJobStatus  
<H2><A NAME="sect1" HREF="#toc1">Synopsis</A></H2>

   <BR>
 <P>
  <B>#include &lt;cplant.h&gt;</B>  <B>int CplantJobSize(int </B><I>job-id</I><B>)</B>     <BR>
<B>int CplantJobNidMap(int </B><I>job-id</I> <B>, int **</B> <I>nid-map</I> <B>)</B>  
  <BR>
<B>int CplantJobPidMap(int </B><I>job-id</I> <B>, int **</B> <I>pid-map</I> <B>)</B>  
  <BR>
<B>int CplantJobStatus(int </B><I>job-id</I> <B>, job_info **</B> <I>status</I> <B>)\
fP    <BR>

<H2><A NAME="sect2" HREF="#toc2"></B>Description</A></H2>
    <BR>
 <P>
  These functions may be called by Cplant parallel applications to obtain
 information about any running Cplant job.  The information is obtained
by sending a request to the <B>bebopd</B>.  The function <B>CplantJobSize</B> returns
the number of processes in the Cplant application identified by job number
<I>job-id</I>.  The functions <B>CplantJobNidMap</B> and <B>CplantJobPidMap</B> allocate memory
for a physical node ID map and portals process ID map respectively for
the Cplant application identified by job number <I>job-id</I>.  The address of the
map is written to <I>nid-map</I> or <I>pid-map</I> respectively, and may be freed by the
caller when it is no longer needed.  The function <B>CplantJobStatus</B> returns
a array of status structures for the Cplant job identified by <I>job-id</I>.  The
<B>job_info</B> structure looks like this:  CRtypedef struct{  <BR>
short rank;       /* process rank */    <BR>
short job_id;     /* cplant job id */    <BR>
int   nid;        /* physical node id */    <BR>
int   u_stat;     /* process status   */    <BR>
int   session_id; /* job's PBS job id */    <BR>
int   parent_id;  /* cplant job ID of spawning parent */    <BR>
int   job_pid;    /* process' system pid  */    <BR>
time_t       elapsed;    /* seconds since fork        */    <BR>
int   niceKillCountdown; /* non-zero if job is being killed */    <BR>
int         priority;    /* 1 - regular, 2 - scavenger */    <BR>
} <B>job_info</B>;     The <I>u_stat</I> status bits that may be of interest to callers
are these:  CR#define  NEW_JOB            (1 &lt;&lt; 0) /* PCT is still setting
up */ <BR>
#define  STARTED            (1 &lt;&lt; 1)   /* user's executable has started */
<BR>
#define  SENT_TO_MAIN       (1 &lt;&lt; 9)   /* it has begun executing user code
*/ <BR>
#define  CHILD_DONE         (1 &lt;&lt; 10)  /* process completed normally */ <BR>
#define  CHILD_NACK         (1 &lt;&lt; 11)  /* process exited before entering
user cod
e*/ <BR>
#define  SENT_KILL_1        (1 &lt;&lt; 12)  /* process was sent a SIGTERM */ <BR>
#define  SENT_KILL_2        (1 &lt;&lt; 13)  /* process was sent a SIGKILL */ <BR>
#define  NICE_KILL_JOB_STARTED  (1 &lt;&lt; 16)  /* process is being "nice-killed"
*/   The <I>status</I> array should be freed by the caller when it is no longer
needed. See the <B>pingd</B> man page for an explanation of the <I>nice-kill</I> operation.

<H2><A NAME="sect3" HREF="#toc3">Errors</A></H2>
    <BR>
 <P>
  All functions return -1 on error, and 0 on success. 
<H2><A NAME="sect4" HREF="#toc4">Bugs</A></H2>
    <BR>
 <P>
  <B>CplantJobNidMap</B> and <B>CplantJobPidMap</B> return maps in physical node number
order rather than process rank order.  This is being corrected.  The array
returned by <B>CplantJobStatus</B> also need not be in process rank order. 
<H2><A NAME="sect5" HREF="#toc5">See
Also</A></H2>
    <BR>
 <P>
  <B>bebopd</B> <B>pingd</B> <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Description</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Errors</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Bugs</A></LI>
<LI><A NAME="toc5" HREF="#sect5">See Also</A></LI>
</UL>
</BODY></HTML>
