  <!-- manual page source format generated by PolyglotMan v3.0.9, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>pingd(1L) manual page</TITLE>
</HEAD>
<BODY bgcolor=white>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">Name</A></H2>
    <BR>
 <P>
  <B>pingd</B> --  The all-purpose interface to the node allocator and compute node
PCTs.  It displays status of a running parallel application, and interrupts
or kills your parallel application.  Plus for administrators only: reserves
nodes, kills PCTs, notifies bebopd of death of PCT, changes bebopd level
of PBS support 
<H2><A NAME="sect1" HREF="#toc1">Synopsis</A></H2>
    <BR>
 <P>
  <B>pingd</B>  [<B>-fast|-interrupt|-kill|-reset|-gone|-reserve <I>user-id</I></B> |-unreserve]  [<B>-job</B> <I>job-ID</I>|<B>-pbsjob</B>
<I>job-ID</I>|<B>-mine</B>|<B>-list</B> <I>no
de-list</I>|\
fB-all]  [<B>-verbose</B>]   [<B>-help|-xtrahelp</B>]   [<B>-parse</B>]  
[<B>-nid</B> <I>node-number</I> <B>-pid</B> <I>portal-id</I>]  [<B>-NoInquire</B>]   [<B>-summary</B>]  [<B>-PBSsupport [ on
| off ] </B> ]   [ <B>-PBSupdate [ on | off ] </B> ]   [ <B> -
PBSinteracti
ve</B> [ <I>n</I> ] ]  
<H2><A NAME="sect2" HREF="#toc2">Description</A></H2>

   <BR>
 <P>
  By default, <B>pingd</B> (ping the daemon) contacts  a bebopd (the Cplant node
allocator daemon) and obtains and displays information  about the status
of compute nodes and the jobs they are running.   System administrators
can use the <I>kill</I> function of <B>pingd</B> to  kill PCTs (the Cplant compute node
daemons), or the <I>gone</I> function to notify the bebopd that a PCT is dead.
The <I>reset</I> function allows users to kill their jobs (with a SIGKILL to every
compute node process) and reset the compute nodes hosting their jobs to
FREE status. The <I>interrupt</I> function allows users to interrupt their jobs
with a SIGTERM to every compute node process. System administrators can
reset or interrupt any compute node. 
<H2><A NAME="sect3" HREF="#toc3">Options</A></H2>
    <BR>
 <P>
  <P>
<P>
 
<DL>

<DT><I>-all</I> </DT>
<DD>    Perform requested operation (like query, reset, interrupt)
on all nodes in the compute partition.  This is the default.  To limit the
operation, use <I>-list</I>, <I>-job</I>, <I>-pbsjob</I> or <I>-mine</I>. <P>
 <P>
 </DD>

<DT><I>-fast</I> </DT>
<DD>    By default, the bebopd
queries all compute nodes for their status before reporting back to <B>pingd</B>
(unless it queried them all very recently).   For a faster display, <I>-fast</I>
queries the bebopd for it's most recent update from the compute  partition.
<P>
 <P>
 <P>
 </DD>

<DT><I>-gone</I> </DT>
<DD>    It is possible that a PCT can terminate without notifying the
 bebopd.  Use <I>-gone</I> to notify the bebopd that a PCT has disappeared from
a node.  </DD>

<DT><I>-help</I> </DT>
<DD></DD>

<DT><I>-xtrahelp</I> </DT>
<DD>    Display a list of <B>pingd</B> options and how to use
them.  <I>-xtrahelp</I> provides a more verbose message. <P>
 </DD>

<DT><I>-interrupt</I> </DT>
<DD>    Send a SIGTERM
to the parallel application on each specified node. System administrators
can interrupt any application. Users can only interrupt their own jobs. <P>

</DD>

<DT><I>-job <I>job-ID</I></I> </DT>
<DD></DD>

<DT><I>-pbsjob <I>job-ID</I></I> </DT>
<DD>    Limit the function to compute nodes running
job number <I>job-ID</I>. A PBS (Portable Batch System) job may start several Cplant
parallel applications.  The job as a whole has a PBS job ID, and each application
has a Cplant job ID.  Use the <I>-pbsjob</I> option to specify a PBS job ID, and
use the <I>-job</I> option to specify a single Cplant parallel application.  <P>
 <P>
 </DD>

<DT><I>-kill</I>
</DT>
<DD>    System administrators can kill PCTs with this option. <P>
 </DD>

<DT><I>-list <I>node-list</I></I>
</DT>
<DD>    Perform the requested operation on the specified list of nodes.   Node
specifiers are delimited by commas.  A node specifier is a  physical node
number or a node range.  A node range is specified by two physical  node
numbers separated by one or more dots.  No white space may be included in
 the <I>node-list</I>. Actually, the <I>node-list</I> may be specified without the <I>-list</I>
option specifier.  If pingd finds something on it's argument line without
an option specifier that can be parsed as a node-list, it will assume it's
a node-list. <P>
 <P>
 </DD>

<DT><I>-mine</I> </DT>
<DD>    Perform function on compute nodes running my jobs
only. <P>
 </DD>

<DT><I>-nid <I>node-number</I></I> </DT>
<DD></DD>

<DT><I>-pid <I>portal-ID</I></I> </DT>
<DD>    These arguments will cause <B>pingd</B>
to contact the bebopd on the specified node number and at the specified
portal ID rather than the bebopd listed in the CRcplant-host file.  This
option is only for testing alternative bebopds and should probably be used
only by Cplant developers. <P>
 <P>
 </DD>

<DT><I>-NoInquire</I> </DT>
<DD>    Normally pingd displays an are
you sure sort of prompt before interrupting, resetting or killing nodes.
 Use the NoInquire option to make pingd skip this step. <P>
 </DD>

<DT><I>-parse</I> </DT>
<DD>    This
option causes pingd to list it's output in an easily parseable format. <P>
 </DD>

<DT><I>-PBSsupport
[on|off] </I> </DT>
<DD></DD>

<DT><I>-PBSupdate [on|off] </I> </DT>
<DD>    PBS (Portal Batch System) can rely on the
Cplant bebopd node allocator to tell it how many live compute nodes are
in the machine.  This number may change if nodes crash or if non-PBS jobs
complete sometime after PBS has started managing the machine.  The bebopd
is running in PBSsupport mode if it is keeping track of the number of live
compute nodes in the machine and policing PBS users to ensure they use
no more nodes than they were allocated.  The bebopd is running in PBSupdate
mode if in addition it sends updates to the PBS server whenever the number
of live compute nodes changes.  These two arguments can be used to turn
on or off PBSsupport and to turn on or off PBSupdate. Since PBSupdate implies
PBSsupport, turning on PBSupdate automatically turns on PBSsupport, turning
off PBSsupport automatically turns off PBSupdate. <P>
 </DD>

<DT><I>-PBSinteractive <I>n</I></I> </DT>
<DD>   
The bebopd can reserve <I>n</I> nodes for interactive use.  PBS will not be able
to schedule these nodes for batch jobs.  This option sends a request to
the bebopd to reserve <I>n</I> nodes for interactive use. <P>
 </DD>

<DT><I>-reserve <I>user-ID</I></I> </DT>
<DD>    System
adminstrators can reserve a node for a particular user with this option.
 The argument is either a user name or numeric user ID. The bebopd will
allow a job running on the node to complete, but will refuse to allocate
the node to anyone other than the specified user. To free the node, use
the <I>-unreserve</I> option.  This option should only be used to debug troubled
nodes.  Taking nodes away can cause jobs to fail when jobs are being scheduled
by PBS. <P>
 </DD>

<DT><I>-reset</I> </DT>
<DD>    Reset the selected nodes.  This option kills the application
process (with SIGKILL), and resets the PCT to available status.  System
administrators can reset any node.  Users can only reset nodes running their
jobs. <P>
 </DD>

<DT><I>-summary</I> </DT>
<DD>    Rather than displaying a line per node, just display
the totals. <P>
 </DD>

<DT><I>-unreserve</I> </DT>
<DD>    Use this option to free a node that has been
reserved for a particular user.  A job running on the node will not be disturbed.
<P>
 </DD>

<DT><I>-verbose</I> </DT>
<DD>    Display extra information about running jobs.  You will not
see this information about other people's jobs unless you are a very special
user. </DD>
</DL>
<P>
 
<H2><A NAME="sect4" HREF="#toc4">Examples</A></H2>
    <BR>
 <P>
  <B>pingd</B> assumes the most restrictive interpretation of which nodes are
specified.  If you provide a list of node numbers, a job ID, and specify
<B>-mine</B>, <B>pingd</B> will perform the operation on the nodes in the list which are
running the job specified, if you own it.  To list the current status of
all nodes in the compute partition:  <P>
<BR>
<PRE>    pingd 
    
</PRE><P>
 To list the status most recently reported to the service partition of
all nodes in the compute partition (without going out and querying the
compute parition):  <P>
<BR>
<PRE>    pingd -fast
    
</PRE><P>
 To kill the PCT on node 20:  <P>
<BR>
<PRE>    pingd -kill -l 20
    
</PRE><P>
 To reset the PCTs on nodes 0 through 100 which are running my jobs, either
of these will work.  (The <I>-l</I> option specifier may be omitted when  specifying
a node list.)  <P>
<BR>
<PRE>    pingd -reset -l 0..100 -mine
    pingd -reset 0..100 -mine
    
</PRE><P>
 To display much status information about my jobs:  <P>
<BR>
<PRE>    pingd -m -v
    
</PRE><P>
 To inform the bebopd that the PCTs on nodes 55, 56, 57 and 61 are dead:
 <P>
<BR>
<PRE>    pingd -gone -l 55..57,61
    
</PRE><P>

<H2><A NAME="sect5" HREF="#toc5">Errors</A></H2>
    <BR>
 <P>
  Some compute nodes may be slow to respond to your request, and <B>pingd</B>
does not wait for them.  This is not an error.  Run <B>pingd</B> again with the
<I>-fast</I> option to get the updates which arrived at the bebopd (service node
daemon) after your <B>pingd</B> display.  (Running without <I>-fast</I> would cause the
bebopd to go out and query all the compute nodes again.)  
<H2><A NAME="sect6" HREF="#toc6">Files</A></H2>
    <BR>
 <P>
  <P>

<DL>

<DT><I>/cplant/cplant-host</I> </DT>
<DD>    This file identifies the location of a bebopd
daemon. </DD>

<DT><I>/var/log/cplant</I> </DT>
<DD>    This is the log file where Cplant daemons and
utilities log status. </DD>
</DL>
<P>

<H2><A NAME="sect7" HREF="#toc7">See Also</A></H2>
    <BR>
 <P>
  <B>bebopd</B> 
<H2><A NAME="sect8" HREF="#toc8">Bugs</A></H2>
    <BR>
 <P>
  Let us know if you locate any (cplant-help@cs.sandia.gov). <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Description</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Options</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Examples</A></LI>
<LI><A NAME="toc5" HREF="#sect5">Errors</A></LI>
<LI><A NAME="toc6" HREF="#sect6">Files</A></LI>
<LI><A NAME="toc7" HREF="#sect7">See Also</A></LI>
<LI><A NAME="toc8" HREF="#sect8">Bugs</A></LI>
</UL>
</BODY></HTML>
