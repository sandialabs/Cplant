  <!-- manual page source format generated by PolyglotMan v3.0.9, -->
<!-- available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<HTML>
<HEAD>
<TITLE>yod2(1) manual page</TITLE>
</HEAD>
<BODY bgcolor=white>
<A HREF="#toc">Table of Contents</A><P>
 
<H2><A NAME="sect0" HREF="#toc0">Name</A></H2>
    <BR>
 <P>
  <B>yod2</B> -- Load a Cplant parallel application 
<H2><A NAME="sect1" HREF="#toc1">Synopsis</A></H2>
    <BR>
 <P>
  <B>yod2</B> {<I>yod2-options</I>}  <B>program-path-name</B> {<I>program-arguments</I>}   OR  <B>yod2</B> {<I>yod2-options</I>}
<B>load-file-name</B>  YOD2-OPTIONS:  [<B>-alloc</B>] [<B>-attach</B>] [<B>-bt</B> ][<B>-D</B>] [<B>-d</B> <I>info-type</I>] 
[<B>-file</B>

<I>file-name</I>]   [<B>-help | -vhelp</B>] [<B>-interactive | -batch</B>][<B>-kill</B> ] [<B>-list</B> \
fInode-list\
fP
]  [<B>-Log</B>] [ [<B>-NOBUF</B>] [<B>-quiet</B>] [<B>-show</B>][<B>-sleep</B> <I>where</I>]  [<B>-strace</B> <I>path-name</I>] [<B>-straceoptions</B>
<I>option-list</I>] [<B>-str
acenodes</B> 
<I>rank-list</I>]  [<B>-sz</B> <I>nodes</I>] [<B>-timing</B>]  [<B>-history</B>] [<B>-nice</B>]

<H2><A NAME="sect2" HREF="#toc2">Description</A></H2>
    <BR>
 <P>
  <B>yod2</B> is a utility that loads parallel applications onto a set of compute
nodes and services requests from them.   It has all the functionality of
<B>yod</B>, but in addition it can process requests from the application to spawn
child applications, synchronize with them, and obtain information about
them.  See the <B>cplant</B> man page for an explanation of these dynamic process
creation requests.  Access to this capability should be available from MPI
eventually as well.  It is possible to send a SIGUSR1 or SIGUSR2 to a parallel
application by sending the signal to <B>yod2</B>.  <B>yod2</B> will forward the signal
to all running applications it is managing. (Type <I>kill -s SIGUSR1 yod2-pid</I>
on the node running <B>yod2</B> to send the application processes a SIGUSR1.) 
Interrupting <B>yod2</B> with CRcontrol-c causes it to interrupt all applications
with a SIGTERM.  <B>yod2</B> will await the completion messages from the compute
nodes.  If the applications have not terminated within 10 seconds, <B>yod2</B>
will terminate them with a SIGKILL.  If the SIGKILL command fails to fan
out because of a mal-functioning compute node, <B>yod2</B> will wait 10 seconds
and reset all the compute nodes that were in use by the applications.  If
you try to use <B>Totalview</B> with <B>yod2</B>, you will only be able to debug the
original application loaded by <B>yod2</B>, not it's descendants. 
<H2><A NAME="sect3" HREF="#toc3">Yod2 Options</A></H2>
 
  <BR>
 <P>
  <P>
<P>
 
<DL>

<DT><I>-alloc</I> </DT>
<DD>    Choosing <I>-alloc</I> was useful for compute node debugging before
the availability of <B>cgdb</B> or <B>Totalview</B>.   It displays the nodes on which
your application has been started and waits for you to press a key before
allowing the processes in your parallel application to procede out of system
code and into user code.  You  could at this point log in to a compute node
and attach a debugger to your application to catch it before it procedes
to <I>main</I>. Since users are discouraged from logging into compute nodes, it
would be better for you to use <I>-attach</I> and <B>cgdb</B>. Also see the <I>-bt</I> option of
yod2. <P>
 </DD>

<DT><I>-attach</I> </DT>
<DD>    This option is essentially the same as <I>-alloc</I>.  It is intended
to hold the application processes once they have started executing at an
instruction prior to user code (prior to <I>main</I>).  You can at this point start
<B>cgdb</B> to attach a debugger to a process.  See the <B>cgdb</B> man page for more
help on debugging compute node processes.  </DD>

<DT><I>-batch</I> </DT>
<DD>    This option informs
<B>yod2</B> that it is not being run  interactively.  In this case, <B>yod2</B> will not
wait for user responses in certain circumstances.  For example, if one of
your application processes terminates abnormally (with a non-zero exit code
or as the result of a signal), <B>yod2</B> will automatically kill your parallel
application for you.  Normally your application is not killed if some processes
are still running. The default is that you are not running in <I>batch</I> mode.
See <I>-interactive</I>. <P>
 </DD>

<DT><I>-bt</I> </DT>
<DD>    This option will cause <B>yod2</B> to display a stack
trace for user processes that terminate abnormally. <B>yod2</B> normally displays
a one-line completion message for each process in yo
ur parallel application,
listing the exit code or terminating signal if any.  If the completion message
indicates that your application process terminated with a signal and you
wish to investigate, you may rebuild your application with debugging symbols
and re-run it with the <I>-bt</I> option of <B>yod2</B>.  The PCT will then attach a debugger
to your process, collect the stack trace when it faults, and send the stack
trace to <B>yod2</B> for display. <P>
 <P>
 </DD>

<DT><I>-D</I> </DT>
<DD>    Turn on debugging of the application
load.  The steps in  the load protocol are displayed as the application
load progresses.  Application process file IO requests are displayed as
<B>yod2</B> receives them. <P>
 </DD>

<DT><I>-file <I>file-name</I></I> </DT>
<DD>    When all processes in the parallel
application have completed, <B>yod2</B> displays a one line completion message
for each process. This message lists the wall-clock time elapsed from start
to finish for the process, and the exit code and terminating signal, if
any, for the process.  By default the listing goes to stdout, but may be
redirected to a file with this option. <P>
 </DD>

<DT><I>-help</I> </DT>
<DD></DD>

<DT><I>-vhelp</I> </DT>
<DD>    <I>-help</I> option displays
a usage message for <B>yod2</B>, <I>-vhelp</I> displays a more verbose message. <P>
 </DD>

<DT><I>-history</I>
</DT>
<DD>    This option causes a history of all jobs started to be displayed when
<B>yod2</B> terminates. <P>
 <P>
 </DD>

<DT><I>-interactive</I> </DT>
<DD>    This option informs <B>yod2</B> that it is being
run interactively by a living user.  This is the default mode.  If <B>yod2</B> is
being run by a script, be certain to specify <B>-batch</B> on the command line.
 One difference between interactive mode and batch mode is that if the
load fails on one node, interactive  mode waits for the user to interrupt
<B>yod2</B> with control-c before cancelling the load on all allocated nodes.  Batch
mode goes ahead and cancels the load. <P>
 </DD>

<DT><I>-kill</I> </DT>
<DD>    When <B>yod2</B> is run in interactive
mode (the default) and a process of a parallel application terminates abnormally,
<B>yod2</B> displays the fact that the process terminated but does not kill the
other processes in the job.  The user may choose to abort the job by terminating
<B>yod2</B> with control-C.  If the user wishes <B>yod2</B> to automatically kill the application
when one or more processes terminates abnormally, then use the <I>-kill</I> option
to yod2. <P>
 </DD>

<DT><I>-list <I>node-list</I></I> </DT>
<DD>    If a <I>node-list</I> is provided on the <B>yod2</B> command
line, then the nodes requested will be allocated out of this list.  If 
CR-sz <I>n</I> is specified as well, then <I>n</I> nodes will be allocated out of the
list.  If there does not exist <I>n</I> free nodes in the list, <B>yod2</B> will display
an error message.  If no CR-sz option is specified, <B>yod2</B> will assume you
want all the nodes in the <I>node-list</I>.  A <I>node-list</I> is a list of node specifiers
separated by commas. A node specifier is a physical node number or a node
range.  A node range is specified by two physical node numbers separated
by one or more dots.  No white space may be included in the <I>node-list</I>.  Example:
CR-l 25..35,112..140,160,165  <BR>
 </DD>

<DT><I>-Log</I> </DT>
<DD>    This option causes the compute node application load protocol
 steps to be logged to CR/var/log/cplant on the compute node. It is intended
for use by Cplant system debuggers. <P>
 </DD>

<DT><I>-nice</I> </DT>
<DD>    This option runs your job
in a low priority mode.  If a regular priority job requests nodes, your
job may be killed to make way for it.  Your job will be signalled with a
SIGTERM, and 5 minutes later with a SIGKILL, if necessary. <P>
 </DD>

<DT><I>-NOBUF</I> </DT>
<DD>    <B>yod2</B>
displays it's own messages and also text printed by the parallel application
processes while they are running.  Normally this combination of buffered
(yod2's status messages) and unbuffered (application output and yod2's error
messages) messages appear sensibly on the tty that started yod2.  But if
<B>yod2</B> was started by an rsh from a remote node, the output appears garbled.
 The <I>-NOBUF</I> option solves this problem by making all <B>yod2</B> output unbuffere
d.
<P>
 </DD>

<DT><I>-quiet</I> </DT>
<DD>    <B>yod2</B>, like this man page, is quite verbose.  It lists many status
and error messages as it loads and runs a parallel application.  If you
wish to have these messages suppressed, run yod2 with the <I>-quiet</I> option.
 <BR>
 </DD>

<DT><I>-show</I> </DT>
<DD>    Cplant parallel applications are encoded with a version string.
 <B>yod2</B> will not load an application encoded with the wrong version string
(unless you run <B>yod2</B> with the secret <I>-xxx</I> option).  The <I>-show</I> option lists
the correct version string and the version string found in your executable.
<P>
 </DD>

<DT><I>-sleep <I>where</I></I> </DT>
<DD>    Cplant system debuggers may want to attach a debugger
to a Cplant application before it is in user code.  This option provides
4 different points at which a the processes can be held for 60 seconds.
 The options are <I>-sleep 1</I>  (right after the fork), <I>-sleep 2</I> (just before
the exec), <I>-sleep 3</I> (right after entering system startup code), <I>-sleep 4</I>
(just before proceeding to <I>main</I>). <P>
 </DD>

<DT><I>-strace <I>path-name</I></I> </DT>
<DD>    Yet another debugging
tool.  <I>path-name</I> should be a directory which is mounted writable on the compute
node.  This option will cause the PCT to run the application process under
strace which will list all system calls (and their arguments) made by the
application process.  By default, only the rank 0 process is traced.  The
strace output goes to a file in directory <I>path-name</I>.  The file name contains
the Cplant job ID and the rank of the process being traced. <P>
 </DD>

<DT><I>-straceoptions
<I>option-list</I></I> </DT>
<DD>    The PCT will invoke strace with the options you specify
in the quoted string <I>option-list</I>.    You must use the <I>-strace</I> option with
this option. <P>
 </DD>

<DT><I>-stracenodes <I>rank-list</I></I> </DT>
<DD>    The PCT will invoke <I>strace</I> on the
processes with the ranks given in the <I>rank-list</I>.  The format for the <I>rank-list</I>
is the same as the format for a node list.  By default, strace is invoked
only on the rank 0 process. You must use the <I>-strace</I> option with this option.
<P>
 </DD>

<DT><I>-sz <I>nodes</I></I> </DT>
<DD>    The number of compute nodes required to run the parallel
application.  One member (process) of the application will run on each node.
 The default if no node list is specified is CR-sz 1.  The default if a node
list is specified is the number of nodes in the node list. <P>
 </DD>

<DT><I>-timing</I> </DT>
<DD>    Interested
in how long the different stages of application load are taking?  The <I>-timing</I>
option times them and displays the results in seconds.  (If our name was
<B>mpirun</B> instead of <B>yod2</B> we would display it in minutes!) </DD>
</DL>
<P>
 
<H2><A NAME="sect4" HREF="#toc4">Return Values</A></H2>

      <BR>
 <P>
  The return value of <B>yod2</B> indicates the result of the original parallel
application it loaded, not the descendants of that application. <B>yod2</B> returns
0 if the original application terminated normally,  1 if the application
ran and terminated abnormally, and 2 if the application load failed and
the application never started. Abnormal termination occurs if one or more
of the processes of parallel application exited with a non-zero exit code,
or was terminated by a signal. 
<H2><A NAME="sect5" HREF="#toc5">See Also</A></H2>
    <BR>
 <P>
  <B>yod</B> <B>pingd</B> <B>PCT</B> <B>bebopd</B> <B>cgdb</B> <P>

<HR><P>
<A NAME="toc"><B>Table of Contents</B></A><P>
<UL>
<LI><A NAME="toc0" HREF="#sect0">Name</A></LI>
<LI><A NAME="toc1" HREF="#sect1">Synopsis</A></LI>
<LI><A NAME="toc2" HREF="#sect2">Description</A></LI>
<LI><A NAME="toc3" HREF="#sect3">Yod2 Options</A></LI>
<LI><A NAME="toc4" HREF="#sect4">Return Values</A></LI>
<LI><A NAME="toc5" HREF="#sect5">See Also</A></LI>
</UL>
</BODY></HTML>
